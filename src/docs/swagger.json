{
    "openapi" : "3.0.0",
    "info" : {
    "title": "API Perpustakaan SMKN 6 Tangsel",
    "version" : "1.0.0"
   },"servers": [
    {
        "description": "local",
        "url": "http://localhost:9999"
    },
    {
        "description": "cloud",
        "url": "tes.com"
    }
   ],
   "paths": {
    "/api/users/register" : {
        "post" :{
            "tags": ["users"],
            "summary": "create an account",
            "responses": {
                "200" : {
                    "description": "success create an account",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "id" : {
                                        "type": "number"
                                    },
                                    "email" : {
                                        "type": "string"
                                    },
                                    "nama" : {
                                        "type": "string"
                                    },
                                    "status" : {
                                        "type": "string"
                                    },
                                    "role" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                           "data" : {
                                             "id" : 1,
                                            "email" : "example@example.com",
                                            "nama" : "john doe",
                                            "status" : "not_verified",
                                            "role" : "user"
                                           }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            },

            "requestBody" : {
                "required": true,
                "content": {
                    "application/json" : {
                        "schema" : {
                            "type": "object",
                            "properties": {
                                "email" :{
                                    "type": "string",
                                    "maxLength": 100,
                                    "required": true
                                },
                                "password" : {
                                    "type": "string",
                                    "required": true
                                },
                                "nama" : {
                                    "type": "string",
                                    "required": true
                                },
                                "role" : {
                                    "type":"string",
                                    "required": true
                                }
                            },"example" : {
                                
                                "email" : "jomtor@gmail.com",
                                "password" : "jomtoroganteng",
                                "nama" : "jontor",
                                "role" : "user"
                                
                            }
                        }
                    }
                }
            }
        }
    },

     "/api/users/login" : {
        "post" :{
            "tags": ["users"],
            "summary": "login to perpus",
            "responses": {
                "200" : {
                    "description": "success login to perpus",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "accessToken" : {
                                                "type": "string"
                                            },
                                            "refreshToken" : {
                                                "type": "string"
                                            },
                                            "status" : {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "accessToken" : "ini jwt",
                                                "refreshToken" : "ini jwt",
                                                "status" : "not_verified"
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"401" : {
                    "description": "email or password wrong",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error" : {
                                    "description": "error",
                                    "value" : 
                                         {
                                            "errors" : "Email or password wrong!"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            },

            "requestBody" : {
                "required": true,
                "content": {
                    "application/json" : {
                        "schema" : {
                            "type": "object",
                            "properties": {
                                "email" :{
                                    "type": "string",
                                    "maxLength": 100,
                                    "required": true
                                },
                                "password" : {
                                    "type": "string",
                                    "required": true
                                }
                            },"example" : {
                                "email" : "jomtor@gmail.com",
                                "password" : "jomtoroganteng"
                            }
                        }
                    }
                }
            }
        }
    },
    "/api/users/activate" : {
        "post" :{
            "tags": ["users"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/code"
                }
            ],
            "summary": "Berhasil verifikasi akun",
            "responses": {
                "200" : {
                    "description": "berhasil verif otp",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : "OK"
                                        }
                                    
                                }
                            }
                        }
                    }
                },"401" : {
                    "description": "token not found",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error 1" : {
                                    "description": "not found atau verified",
                                    "value" : 
                                         {
                                            "errors" : "Token tidak ditemukan atau sudah di verifikasi"
                                        }
                                    
                                },"error 2" : {
                                    "description": "token expired",
                                    "value" : {"errors" : "token expired"}
                                }
                            }
                        }
                    }
                },"410" : {
                    "description": "User Already verified or otp already expired!",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error" : {
                                    "description": "error",
                                    "value" : 
                                         {
                                            "errors" : "User Already verified or otp already expired!"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            }
        }
    },"/api/users/forgotPasswordRequest" : {
        "post" :{
            "tags": ["users"],
            "summary": "Request forgot password, masukan email terus ngirim link untuk ganti password nya",
            "responses": {
                "200" : {
                    "description": "berhasil request",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : "OK"
                                        }
                                    
                                }
                            }
                        }
                    }
                },"404" : {
                    "description": "user not found",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error" : {
                                    "description": "error",
                                    "value" : 
                                         {
                                            "errors" : "User not found!"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            },

            "requestBody" : {
                "required": true,
                "content": {
                    "application/json" : {
                        "schema" : {
                            "type": "object",
                            "properties": {
                                "otp" :{
                                    "type": "email",
                                    "required": true
                                }
                            },"example" : {
                                "email" : "rohmat@gmail.com"
                            }
                        }
                    }
                }
            }
        }
    },"/api/users/changePassword/:token" : {
        "patch" :{
            "tags": ["users"],
            "summary": "route buat change password",
            "parameters": [
                {
                     "$ref" : "#/components/parameters/token"
                }
            ],
            "responses": {
                "200" : {
                    "description": "berhasil change pw",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : "OK"
                                        }
                                    
                                }
                            }
                        }
                    }
                },"401" : {
                    "description": "token not valid or expired",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error" : {
                                    "description": "error",
                                    "value" : 
                                         {
                                            "errors" : "token not valid or expired"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            },

            "requestBody" : {
                "required": true,
                "content": {
                    "application/json" : {
                        "schema" : {
                            "type": "object",
                            "properties": {
                                "password" :{
                                    "type": "string",
                                    "required": true
                                }
                            },"example" : {
                                "password" : "asdasdasdgsdfds"
                            }
                        }
                    }
                }
            }
        }
    },
    "/api/users/current" : {
        "get" :{
            "tags": ["users"],
            "summary": "get current user",
            "parameters": [
                {
                     "$ref" : "#/components/parameters/accessToken"
                }
            ],
            "responses": {
                "200" : {
                    "description": "success get data",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "id" : {
                                                "type": "number"
                                            },
                                            "nama" : {
                                                "type": "string"
                                            },"email" : {
                                                "type": "string"
                                            },
                                            "status" : {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "email" : "tes@tes.com",
                                                "nama" : "tes",
                                                "id" : 1,
                                                "status" : "verified"
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            }
            
        }
    },
    "/api/users/token" : {
        "post" :{
            "tags": ["users"],
            "summary": "refresh access token",
            "parameters": [
                {
                     "$ref" : "#/components/parameters/refreshToken"
                     
                },{"$ref" : "#/components/parameters/accessToken"}
            ],
            "responses": {
                "200" : {
                    "description": "success refresh token",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "data" : {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "accessToken" : "ini jwt"
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"400" : {
                    "description": "token access masih belum expired",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "errors" : {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "serror",
                                    "value" : 
                                         {
                                            "errors" : "Token still active"
                                        }
                                    
                                }
                            }
                        }
                    }
                },"401" : {
                    "description": "token invalid",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "errors" : {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "serror",
                                    "value" : 
                                         {
                                            "errors" : "Token invalid"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
            }
            
        }
    },"/api/users/logout" : {
        "post" :{
            "tags": ["users"],
            "summary": "logout",
            "parameters": [
                {
                     "$ref" : "#/components/parameters/refreshToken"
                     
                },{"$ref" : "#/components/parameters/accessToken"}
            ],
            "responses": {
                "200" : {
                    "description": "success logout",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "data" : {
                                                "type": "string"
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : "OK"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                }
            }
            
        
    },"/api/users/update" : {
        "post" :{
            "tags": ["users"],
            "summary": "update email dan nama",
            "parameters": [
                {
                     "$ref" : "#/components/parameters/refreshToken"
                     
                },{"$ref" : "#/components/parameters/accessToken"}
            ],
            "responses": {
                "200" : {
                    "description": "success update profile",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object",
                                        "properties": {
                                            "data" : {
                                                "type": "object",
                                                "properties": {
                                                    "nama" : {
                                                        "type": "string"
                                                    },"email" : {
                                                        "type": "string"
                                                    },
                                                    "status" : {
                                                        "type": "string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success , abis ganti profile balik lagi untuk aktivasi otp",
                                    "value" : 
                                         {
                                            "data" :{
                                                "email" : "ridho@ridho@.com",
                                                "nama" : "ridho",
                                                "status" : "not_verified"
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"404" : {
                    "description": "user  not found",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error" : {
                                    "description": "error",
                                    "value" : 
                                         {
                                            "errors" : "User not found!"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                },"requestBody" : {
                "required": true,
                "content": {
                    "application/json" : {
                        "schema" : {
                            "type": "object",
                            "properties": {
                                "email" :{
                                    "type": "string",
                                    "maxLength": 100,
                                    "required": false
                                },
                               
                                "nama" : {
                                    "type": "string",
                                    "required": false
                                }
                                
                            },"example" : {
                                
                                "email" : "jomtor@gmail.com",
                                
                                "nama" : "jontor"
                                
                            }
                        }
                    }
                }
            }
            }
            
        
    },
    "/api/users/refreshCode" : {
        "post" :{
            "tags": ["users"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/code"
                }
            ],
            "summary": "Berhasil verifikasi akun",
            "responses": {
                "200" : {
                    "description": "berhasil refresh link aktivasi",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "token" : "ini kode "
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"404" : {
                    "description": "token not found",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "error 1" : {
                                    "description": "not found atau verified",
                                    "value" : 
                                         {
                                            "errors" : "Token tidak ditemukan atau sudah di verifikasi"
                                        }
                                    
                                },"error 2" : {
                                    "description": "token expired",
                                    "value" : {"errors" : "token expired"}
                                }
                            }
                        }
                    }
                        }
                    }
                }
            },
        "/api/books/create" : {
        "post" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                }
            ],
            "summary": "Memasukan Data buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "id" : 1,
                                                "judul" : "buku1",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    },"requestBody" : {
                "required": true,
                "content": {
                    "application/json" : {
                        "schema" : {
                            "$ref" : "#/components/schemas/body_create"
                        }
                    }
                }
            }
                }
            },
            "/api/books/get/:id_buku" : {
        "get" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                },
                {
                    "$ref" : "#/components/parameters/id_buku"
                }
            ],
            "summary": "get Data buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "id" : 1,
                                                "judul" : "buku1",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1,
                                                "isFeatured" : true
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            },"/api/books/update/:id_buku" : {
        "patch" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                },
                {
                    "$ref" : "#/components/parameters/id_buku"
                }
            ],
            "summary": "update Data buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : {
                                                "id" : 1,
                                                "judul" : "buku1",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1,
                                                "isFeatured" : true
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"400" : {
                    "description": "tidak ada data yang diubah",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "err",
                                    "value" : 
                                         {
                                           "errors" : "tidak ada data yang diubah"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    },"requestBody" : {
                "required": true,
                "description": "field nya semua nya optional",
                "content": {
                    "application/json" : {
                        
                        "schema" : {
                            "$ref" : "#/components/schemas/body_update"
                        }
                    }
                }
            }
                }
            },
             "/api/books/delete/:id_buku" : {
        "delete" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                },
                {
                    "$ref" : "#/components/parameters/id_buku"
                }
            ],
            "summary": "delete Data buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data" : "OK"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            }, "/api/books/getAll" : {
        "get" :{
            "tags": ["general"],
            "summary": "get All bUKU",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "array"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                            "data" : [
                                                {
                                                "id" : 1,
                                                "judul" : "buku1",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1,
                                                "isFeatured" : true
                                                },
                                                {
                                                   "id" : 2,
                                                "judul" : "buku2",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1,
                                                "isFeatured" : true 
                                                }
                                            ]
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            }, "/api/books/search" : {
        "get" :{
            "tags": ["general"],
            "parameters": [
                {
                    "name": "size",
                    "in": "query",
                    "required": true,
                    "description": "berapa banyak data yang ingin diambil di per page.default 10",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"10"
                        }
                    }
                },
                {
                    "name": "page",
                    "in": "query",
                    "required": true,
                    "description": "page nya.default 1",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"10"
                        }
                    }
                },
                {
                    "name": "judul",
                    "in": "query",
                    "required": false,
                    "description": "judul opsional pilih salah satu dengan kategori",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"a"
                        }
                    }
                },{
                    "name": "kategori",
                    "in": "query",
                    "required": false,
                    "description": "kategori opsional pilih salah satu dengan judul",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"a"
                        }
                    }
                },{
                    "name": "featured",
                    "in": "query",
                    "required": false,
                    "description": "judul opsional kalo mau ngambil buku yang featured",
                    "schema" : {
                        "type": "boolean"
                         
                    },"examples": {
                        "-" : {
                            "value" :true
                        }
                    }
                }
            ],
            "summary": "search buku berdasarkan judul atau kategori atau kedua nya",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "array"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                            "data" : [
                                                {
                                                "id" : 1,
                                                "judul" : "buku1",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1,
                                                "isFeatured" : true
                                                },
                                                {
                                                   "id" : 2,
                                                "judul" : "buku2",
                                                "penulis" : "jondok",
                                                "penerbit" : "penerbit",
                                                "tahun_terbit" : 1999,
                                                "kategori" : "fiksi",
                                                "stok" : 1,
                                                "isFeatured" : true 
                                                }
                                            ]
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            },
        "/api/peminjaman/validate/:id_peminjaman" : {
        "post" :{
            "tags": ["admin"],
            "parameters": [
                { "$ref" : "#/components/parameters/accessToken"},
                {
                    "$ref" : "#/components/parameters/id_peminjaman"
                }
            ],
            "summary": "validasi peminjaman buku dari user",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "array"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                            "data" : "Success"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            },"/api/peminjaman/create" : {
        "post" :{
            "tags": ["anggota"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                }
            ],
            "summary": "anggota create peminjaman buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data": {
                                                 "id": 8,
                                                 "user_id": 8,
                                                 "buku_id": 10,
                                                 "tanggal_pinjam": "2025-11-15T07:58:08.179Z",
                                                 "tenggat_kembali": "2025-11-29T07:58:08.179Z",
                                                 "valid": false,
                                                 "status": "Dipinjam",
                                                 "user": {
                                                    "nama": "Ridhooo FIRD"
                                                  },
                                                 "buku": {
                                                   "judul": "Jaka Sembung"
                                                    }
                                                }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"409" : {
                    "description": "stok habis",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "err",
                                    "value" : 
                                         {
                                           "errors" : "Peminjaman Gagal karena stok habis"
                                        }
                                    
                                }
                            }
                        }
                    }
                },"410" : {
                    "description": "Masih meminjam buku yang sama",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "err",
                                    "value" : 
                                         {
                                           "errors" : "Anda Masih Meminjam Buku ini"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    },"requestBody" : {
                "required": true,
                "description": "masukan id buku yang ingin di pinjam saja",
                "content": {
                    "application/json" : {
                        
                        "schema" : {
                            "type": "object",
                             "properties": {
                                "buku_id" : {
                                    "type": "integer",
                                    "required": true
                                }
                             }
                        }
                    }
                }
            }
                }
            },"/api/pengembalian/:id_peminjaman" : {
        "post" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                },{
                     "$ref" : "#/components/parameters/id_peminjaman"
                }
            ],
            "summary": "proses pengembalian Buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                         {
                                            "data": {
                                                 "id": 3,
                                                 "peminjaman_id": 8,
                                                 "tanggal_dikembalikan": "2025-11-30T13:41:24.405Z",
                                                 "hari_telat": 2,
                                                 "kondisi_buku": "Hilang",
                                                 "denda": "105000"
                                                }
                                        }
                                    
                                }
                            }
                        }
                    }
                },"403" : {
                    "description": "peminjaman belum di validasi oleh atmin",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "err",
                                    "value" : 
                                         {
                                           "errors" : "Peminjaman Belum Di validasi"
                                        }
                                    
                                }
                            }
                        }
                    }
                },"409" : {
                    "description": "peminjaman sudah dikembalikan",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "errors" : {
                                        "type": "string"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "err",
                                    "value" : 
                                         {
                                           "errors" : "Peminjaman Sudah Dikembalikan"
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    },"requestBody" : {
                "required": true,
                "description": "masukan kondisi buku ketika dikembalikan,enum hanya menerima `Baik`, 'Rusak', 'Hilang' ",
                "content": {
                    "application/json" : {
                        
                        "schema" : {
                            "type": "object",
                             "properties": {
                                "kondisi_buku" : {
                                    "type": "string",
                                    "required": true
                                }
                             }
                        }
                    }
                }
            }
                }
            },"/api/peminjaman/getAll" : {
        "get" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "name": "size",
                    "in": "query",
                    "required": true,
                    "description": "berapa banyak data yang ingin diambil di per page.default 10",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"10"
                        }
                    }
                },
                {
                    "name": "page",
                    "in": "query",
                    "required": true,
                    "description": "page nya.default 1",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"10"
                        }
                    }
                }
            ],
            "summary": "get All peminjaman",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "array"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                            "data": [
        {
            "id": 8,
            "user_id": 8,
            "buku_id": 10,
            "tanggal_pinjam": "2025-11-15T07:58:08.179Z",
            "tenggat_kembali": "2025-11-29T07:58:08.179Z",
            "valid": false,
            "status": "Dipinjam",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Jaka Sembung"
            }
        },
        {
            "id": 7,
            "user_id": 8,
            "buku_id": 6,
            "tanggal_pinjam": "2025-11-15T07:55:48.647Z",
            "tenggat_kembali": "2025-11-29T07:55:48.647Z",
            "valid": true,
            "status": "Dikembalikan",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Buku245"
            }
        },
        {
            "id": 5,
            "user_id": 8,
            "buku_id": 2,
            "tanggal_pinjam": "2025-11-15T07:11:05.981Z",
            "tenggat_kembali": "2025-11-29T07:11:05.981Z",
            "valid": true,
            "status": "Dipinjam",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Buku 1"
            }
        }
    ],
    "paging": {
        "page": 1,
        "totalItems": 10,
        "totalPage": 1
    }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            },"/api/statistic" : {
        "get" :{
            "tags": ["general"],
            "summary": "get statistik untuk dashboard",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "object"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                            "data": {
                                                 "total_buku": 10,
        "total_anggota": 30,
        "buku_dipinjam": 0,
        "buku_terlambat": 1
                                            }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            }, "/api/peminjaman/search" : {
        "get" :{
            "tags": ["admin"],
            "parameters": [
                {
                    "name": "size",
                    "in": "query",
                    "required": true,
                    "description": "berapa banyak data yang ingin diambil di per page.default 10",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"10"
                        }
                    }
                },
                {
                    "name": "page",
                    "in": "query",
                    "required": true,
                    "description": "page nya.default 1",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"10"
                        }
                    }
                },
                {
                    "name": "judul",
                    "in": "query",
                    "required": false,
                    "description": "judul opsional pilih salah satu dengan nama user",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"a"
                        }
                    }
                },{
                    "name": "user",
                    "in": "query",
                    "required": false,
                    "description": "nama user opsional",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"a"
                        }
                    }
                }
            ],
            "summary": "search peminjaman berdasarkan nama user atau judul buku",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "array"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                           "data": [
        {
            "id": 5,
            "user_id": 8,
            "buku_id": 2,
            "tanggal_pinjam": "2025-11-15T07:11:05.981Z",
            "tenggat_kembali": "2025-11-29T07:11:05.981Z",
            "valid": true,
            "status": "Dikembalikan",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Buku 1"
            }
        },
        {
            "id": 7,
            "user_id": 8,
            "buku_id": 6,
            "tanggal_pinjam": "2025-11-15T07:55:48.647Z",
            "tenggat_kembali": "2025-11-29T07:55:48.647Z",
            "valid": true,
            "status": "Dikembalikan",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Buku245"
            }
        },
        {
            "id": 8,
            "user_id": 8,
            "buku_id": 10,
            "tanggal_pinjam": "2025-11-15T07:58:08.179Z",
            "tenggat_kembali": "2025-11-29T07:58:08.179Z",
            "valid": true,
            "status": "Dikembalikan",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Jaka Sembung"
            }
        },
        {
            "id": 14,
            "user_id": 8,
            "buku_id": 11,
            "tanggal_pinjam": "2025-11-16T13:53:37.556Z",
            "tenggat_kembali": "2025-11-30T13:53:37.556Z",
            "valid": false,
            "status": "Dipinjam",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "ayam vs bebek"
            }
        },
        {
            "id": 17,
            "user_id": 8,
            "buku_id": 10,
            "tanggal_pinjam": "2025-11-17T13:00:22.745Z",
            "tenggat_kembali": "2025-12-01T13:00:22.745Z",
            "valid": true,
            "status": "Dipinjam",
            "user": {
                "nama": "Ridhooo FIRD"
            },
            "buku": {
                "judul": "Jaka Sembung"
            }
        }
    ],
    "paging": {
        "page": 1,
        "totalItems": 5,
        "totalPage": 1
    }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            },"/api/peminjaman/get" : {
        "get" :{
            "tags": ["anggota"],
            "parameters": [
                {
                    "$ref" : "#/components/parameters/accessToken"
                }
                
            ],
            "summary": "GET buku yang dipinjam oleh user yg login",
            "responses": {
                "200" : {
                    "description": "sukses",
                    "content": {
                        "application/json" : {
                            "schema" : {
                                "type": "object",
                                "properties": {
                                    "data" : {
                                        "type": "array"
                                    }
                                }
                            },"examples": {
                                "Success" : {
                                    "description": "success",
                                    "value" : 
                                        {
                                            "data": [
        {
            "id": 5,
            "user_id": 8,
            "buku_id": 2,
            "tanggal_pinjam": "2025-11-15T07:11:05.981Z",
            "tenggat_kembali": "2025-11-29T07:11:05.981Z",
            "valid": true,
            "status": "Dikembalikan"
        },
        {
            "id": 7,
            "user_id": 8,
            "buku_id": 6,
            "tanggal_pinjam": "2025-11-15T07:55:48.647Z",
            "tenggat_kembali": "2025-11-29T07:55:48.647Z",
            "valid": true,
            "status": "Dikembalikan"
        },
        {
            "id": 8,
            "user_id": 8,
            "buku_id": 10,
            "tanggal_pinjam": "2025-11-15T07:58:08.179Z",
            "tenggat_kembali": "2025-11-29T07:58:08.179Z",
            "valid": true,
            "status": "Dikembalikan"
        },
        {
            "id": 14,
            "user_id": 8,
            "buku_id": 11,
            "tanggal_pinjam": "2025-11-16T13:53:37.556Z",
            "tenggat_kembali": "2025-11-30T13:53:37.556Z",
            "valid": false,
            "status": "Dipinjam"
        },
        {
            "id": 17,
            "user_id": 8,
            "buku_id": 10,
            "tanggal_pinjam": "2025-11-17T13:00:22.745Z",
            "tenggat_kembali": "2025-12-01T13:00:22.745Z",
            "valid": true,
            "status": "Dipinjam"
        }
    ],
    "paging": {
        "page": 1,
        "totalItems": 5,
        "totalPage": 1
    }
                                        }
                                    
                                }
                            }
                        }
                    }
                }
                    }
                }
            }
            

            




   },"components": {
        "parameters": {
            "accessToken" : {
                "name": "accessToken",
                    "in": "header",
                    "required": true,
                    "description": "login dulu",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 512
                    },"examples": {
                        "-" : {
                            "value" :"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"
                        }
                    }
            },"token" : {
                "name": "token",
                    "in": "path",
                    "required": true,
                    "description": "token dari link buat change pw",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"rfgdfhfnmhgcxfgsdzfesgdfbvxbxvbdf"
                        }
                    }
            },"email" : {
                "name": "email",
                    "in": "cookie",
                    "required": true,
                    "description": "ini di set abis regist terus di hapus kalo udah verif",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" :"ridho@ridho.com"
                        }
                    }
            },"refreshToken" : {
                "name": "refreshToken",
                    "in": "cookie",
                    "required": true,
                    "description": "login dulu",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 512
                    },"examples": {
                        "-" : {
                            "value" :"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWUsImlhdCI6MTUxNjIzOTAyMn0.KMUFsIDTnFmyG3nMiGM6H9FNFUROf3wh7SmqJp-QV30"
                        }
                    }
            },"id_user" : {
                "name": "id_user",
                    "in": "path",
                    "required": true,
                    "description": "ini id_user dari jwt",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" : 1
                        }
                    }
            },"code" : {
                "name": "code",
                    "in": "query",
                    "required": true,
                    "description": "token dari regist",
                    "schema" : {
                        "type": "string",
                         "minLength": 1,
                        "maxLength": 512
                    },"examples": {
                        "-" : {
                            "value" :"ini kode hex 32"
                        }
                    }
            },
            "id_buku" : {
                "name": "id_buku",
                    "in": "params",
                    "required": true,
                    "description": "id buku di taruh di params",
                    "schema" : {
                        "type": "number",
                         "minLength": 1
                        
                    },"examples": {
                        "-" : {
                            "value" :1
                        }
                    }
            },"id_peminjaman" : {
                "name": "id_peminjaman",
                    "in": "path",
                    "required": true,
                    "description": "ini id peminjaman",
                    "schema" : {
                        "type": "number",
                         "minLength": 1,
                        "maxLength": 100
                    },"examples": {
                        "-" : {
                            "value" : 1
                        }
                    }
            }
        },"schemas": {
            "body_create" : {
                                "type": "object",
                                "properties": {
                                    "judul" : {
                                        "type": "string"
                                    },
                                    "penulis" : {
                                        "type": "string"
                                    },"penerbit" : {
                                        "type": "string"
                                    },"tahun_terbit" : {
                                        "type": "number",
                                        "format": "int32"
                                    },"kategori" : {
                                        "type": "string"
                                    },
                                    "stok" : {
                                        "type": "number"
                                        ,"format": "int32"
                                    }
                                    
                                }
        },"body_update" : {
                                "type": "object",
                                "properties": {
                                    "judul" : {
                                        "type": "string",
                                        "required": false
                                    },
                                    "penulis" : {
                                        "type": "string",
                                        "required": false
                                    },"penerbit" : {
                                        "type": "string",
                                        "required": false
                                    },"tahun_terbit" : {
                                        "type": "number",
                                        "format": "int32"
                                        ,"required": false
                                    },"kategori" : {
                                        "type": "string",
                                        "required": false
                                    },
                                    "stok" : {
                                        "type": "number"
                                        ,"format": "int32",
                                        "required": false
                                    }
                                    
                                }
        }
        }
   }
}